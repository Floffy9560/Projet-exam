<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agenda Prise de RDV</title>
    <link rel="stylesheet" href="agenda.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <section>
      <div class="calendarContainer">
        <div class="header">
          <button id="prevMonth" class="buttonHeader">
            <i class="bi bi-arrow-left-circle"></i>
          </button>
          <span id="currentMonth" class="currentMonth"></span>
          <button id="nextMonth" class="buttonHeader">
            <i class="bi bi-arrow-right-circle"></i>
          </button>
        </div>
        <div class="calendar" id="calendar">
          <table>
            <thead id="thead"></thead>
            <tbody id="tbody"></tbody>
          </table>
        </div>

        <div class="footer">
          <button type="button" class="buttonFooter">Réinitialisé</button>
          <button type="button" class="buttonFooter">Ok</button>
        </div>
      </div>
      <div class="priseDeRendezVous">
        <div class="dateChoisi"><p>Ici la date choisie</p></div>
        <div class="hourOfDate">
          <span>9h00</span><span>10h00</span><span>11h00</span><span>12h00</span
          ><span>14h00</span><span>15h00</span><span>16h00</span
          ><span>17h00</span>
        </div>
        <button class="rdv">Prendre rendez-vous</button>
      </div>
    </section>

    <script>
      const currentMonthDisplay = document.getElementById("currentMonth");
      const prevMonthButton = document.getElementById("prevMonth");
      const nextMonthButton = document.getElementById("nextMonth");

      let currentDate = new Date();

      // Tableau des noms des mois
      const monthNames = [
        "Janvier",
        "Février",
        "Mars",
        "Avril",
        "Mai",
        "Juin",
        "Juillet",
        "Août",
        "Septembre",
        "Octobre",
        "Novembre",
        "Décembre",
      ];

      // Met à jour l'affichage du mois et de l'année
      function updateMonthDisplay() {
        currentMonthDisplay.innerHTML = `${
          monthNames[currentDate.getMonth()]
        } ${currentDate.getFullYear()}`;
      }

      // Fonction pour créer le calendrier
      function createCalendar(month, year) {
        const thead = document.getElementById("thead");
        const tbody = document.getElementById("tbody");

        // Vide le calendrier
        thead.innerHTML = "";
        tbody.innerHTML = "";

        // Ajouter les en-têtes des jours de la semaine
        const daysOfWeek = ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"];
        let headerRow = document.createElement("tr");
        daysOfWeek.forEach((day) => {
          let th = document.createElement("th");
          th.innerText = day;
          headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);

        // Générer les jours du mois
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        let firstDay = new Date(year, month, 1).getDay();
        firstDay = firstDay === 0 ? 6 : firstDay - 1;

        let date = 1;

        for (let i = 0; i < 6; i++) {
          let week = document.createElement("tr");

          for (let j = 0; j < 7; j++) {
            let day = document.createElement("td");
            if (i === 0 && j < firstDay) {
              week.appendChild(day); // Cellule vide
            } else if (date > daysInMonth) {
              week.appendChild(day); // Cellule vide
            } else {
              day.innerText = date; // Insère la date
              week.appendChild(day);
              date++;
            }
          }
          tbody.appendChild(week);
        }
      }

      // Gérer les boutons "Mois Précédent" et "Mois Suivant"
      prevMonthButton.addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        updateMonthDisplay();
        createCalendar(currentDate.getMonth(), currentDate.getFullYear());
      });

      nextMonthButton.addEventListener("click", () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        updateMonthDisplay();
        createCalendar(currentDate.getMonth(), currentDate.getFullYear());
      });

      // Bouton Réinitialisé
      document
        .querySelector(".buttonFooter:first-child")
        .addEventListener("click", () => {
          currentDate = new Date();
          updateMonthDisplay();
          createCalendar(currentDate.getMonth(), currentDate.getFullYear());
        });

      // Bouton Ok
      document
        .querySelector(".buttonFooter:last-child")
        .addEventListener("click", () => {
          alert(
            `Le mois sélectionné est : ${
              monthNames[currentDate.getMonth()]
            } ${currentDate.getFullYear()}`
          );
        });

      // Initialiser l'affichage
      updateMonthDisplay();
      createCalendar(currentDate.getMonth(), currentDate.getFullYear());
    </script>
  </body>
</html>
